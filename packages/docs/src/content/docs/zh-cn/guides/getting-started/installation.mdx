---
title: 安装
description: 在不同的构建工具和框架中安装 Gueleton
frameworks:
  - vue
---

import { Aside, Tabs, TabItem , Code, Steps, LinkCard } from '@astrojs/starlight/components';
import FrameworkSlots from '@components/FrameworkSlots.astro';
import BoundlerSlots from '@components/BoundlerSlots.astro';
import GueletonLogo from '@components/GueletonLogo.astro';


import PluginSetupNuxt from '@snippets/guides/getting-started/installation/nuxt/nuxt.config.ts?raw';
import PluginSetupVite from '@snippets/guides/getting-started/installation/vite/vite.config.ts?raw';
import PluginSetupWebpack from '@snippets/guides/getting-started/installation/webpack/webpack.config.js?raw';
import PluginSetupVueCli from '@snippets/guides/getting-started/installation/vue-cli/vue.config.js?raw';

import RegisterComponentsVite from '@snippets/guides/getting-started/installation/vite/main.ts?raw';
import RegisterComponentsWebpack from '@snippets/guides/getting-started/installation/webpack/main.js?raw';
import RegisterComponentsVueCli from '@snippets/guides/getting-started/installation/vue-cli/main.js?raw';

import LimitNuxt from '@snippets/guides/getting-started/installation/nuxt/limit.app.config.ts?raw';
import LimitVite from '@snippets/guides/getting-started/installation/vite/limit.main.ts?raw';
import LimitWebpack from '@snippets/guides/getting-started/installation/webpack/limit.main.js?raw';
import LimitVueCli from '@snippets/guides/getting-started/installation/vue-cli/limit.main.js?raw';

import DevServerNuxt from '@snippets/guides/getting-started/installation/nuxt/dev-server.mdx';
import DevServerVite from '@snippets/guides/getting-started/installation/vite/dev-server.mdx';
import DevServerWebpack from '@snippets/guides/getting-started/installation/webpack/dev-server.mdx';
import DevServerVueCli from '@snippets/guides/getting-started/installation/vue-cli/dev-server.mdx';

## 设置

### 添加到你的项目

<Steps>
1.  安装 `unplugin-gueleton` 包
    <Tabs>
      <TabItem label="npm" icon="seti:npm">
        ```bash
        npm install unplugin-gueleton@latest
        ```
      </TabItem>
      <TabItem label="pnpm" icon="pnpm">
        ```bash
        pnpm add unplugin-gueleton@latest
        ```
      </TabItem>
      <TabItem label="yarn" icon="seti:yarn">
        ```bash
        yarn add unplugin-gueleton@latest
        ```
      </TabItem>
    </Tabs>
2.  将 `unplugin-gueleton` 作为插件添加到你的构建工具配置中
    <BoundlerSlots>
      <Code slot="nuxt" code={PluginSetupNuxt} lang="ts" title="nuxt.config.ts" />

      <Fragment slot="vite">
        <Code code={PluginSetupVite} lang="ts" title="vite.config.ts" />

        <Aside type="tip" title="vite-plugin-html 注意事项">
          与 `vite-plugin-html` 插件一起使用时，你需要将 `unplugin-gueleton` 插件添加在 `vite-plugin-html` 之前，以确保正确处理 HTML 文件。
        </Aside>
      </Fragment>

      <Code slot="webpack" code={PluginSetupWebpack} lang="js" title="webpack.config.js" />
      <Code slot="vue-cli" code={PluginSetupVueCli} lang="js" title="vue.config.js" />
    </BoundlerSlots>
3.  将 Gueleton 组件注册到应用中
    <BoundlerSlots>
      <Aside slot="nuxt" type="tip">
        得益于 Nuxt 的自动导入功能，你无需手动注册组件。只需确保在 `nuxt.config.ts` 中正确配置了插件即可。
      </Aside>
      <Code slot="vite" code={RegisterComponentsVite} lang="ts" title="main.ts" />
      <Code slot="webpack" code={RegisterComponentsWebpack} lang="js" title="main.js" />
      <Code slot="vue-cli" code={RegisterComponentsVueCli} lang="js" title="main.js" />
    </BoundlerSlots>

4.  启动开发服务器
    <BoundlerSlots>
      <DevServerNuxt slot="nuxt" />
      <DevServerVite slot="vite" />
      <DevServerWebpack slot="webpack" />
      <DevServerVueCli slot="vue-cli" />
    </BoundlerSlots>


5.  最后，你还需要了解一些特定于 <GueletonLogo /> 的内容。
    
    首先，占位骨架一般由一个浅色底加上一个或多个深色块组成。

    <div class="my-4 p-4 border border-gray-200 rounded-lg bg-white dark:bg-gray-800">
      <div class="w-full h-6 bg-white dark:bg-gray-800 rounded mb-4 flex items-center justify-center text-gray-400 dark:text-gray-600 font-medium">
        <span class="">container</span>
      </div>
      <div class="w-full h-12 bg-gray-200 dark:bg-gray-700 rounded mb-4 flex items-center justify-center text-gray-500 dark:text-gray-400 font-medium">
        <span class="">bone</span>
      </div>
      <div class="w-1/2 h-6 bg-gray-200 dark:bg-gray-700 rounded flex items-center justify-center text-gray-500 dark:text-gray-400 font-medium">
        <span class="">bone</span>
      </div>
      <div class="w-1/3 h-6 bg-gray-200 dark:bg-gray-700 rounded flex items-center justify-center text-gray-500 dark:text-gray-400 font-medium">
        <span class="">bone</span>
      </div>
    </div>

    Gueleton 将浅色底称为 **`container`**，而深色块则称为 **`bone`**。

    当自定义的占位骨架的样式时，你会用它们分别定义底部和骨架块的样式。

    就这些！现在你已经成功安装了 Gueleton，并可以开始使用它来为你的应用添加占位骨架屏了。
</Steps>

## 选项

你可以通过向插件传递选项来自定义全局的 Gueleton 行为。

### `limit`

使用 `limit` 选项来设置预存数据的裁剪规则。它可以是一个数字或一个对象。

- 当 `limit` 为数字时, 表示取前 `limit` 项, 仅对数组有效.
- 当 `limit` 为对象时, `length` 表示取前 `length` 项, `properties` 表示裁剪对象的属性, 仅对对象有效.

- 默认值: `3`

<BoundlerSlots>
  <Code slot="nuxt" code={LimitNuxt} lang="ts" title="app.config.ts" />
  <Code slot="vite" code={LimitVite} lang="ts" title="main.ts" />
  <Code slot="webpack" code={LimitWebpack} lang="js" title="main.js" />
  <Code slot="vue-cli" code={LimitVueCli} lang="js" title="main.js" />
</BoundlerSlots>

### `skeleton.fuzzy`

使用 `skeleton.fuzzy` 选项可以调整 Gueleton 如何确定哪些 DOM 元素被识别为 `bone`。

-   默认值: `1`
-   示例：
    1.  当 `skeleton.fuzzy` 设置为 `1` 时，`p1` 和 `span1` 分别被识别为 `bone`。
        ```html "<p class="p1">这是一个段落。</p>" "<span class="span1">内联元素</span>"
        <div class="div1">
          <p class="p1">这是一个段落。</p>
          <p class="p2">
            <span class="span1">内联元素</span>
          </p>
        </div>
        ```

    2.  当 `skeleton.fuzzy` 设置为 `2` 时，整个 `div1` 将被识别为一个 `bone`。
        ```html {1-6}
        <div class="div1">
          <p class="p1">这是一个段落。</p>
          <p class="p2">
            <span class="span1">内联元素</span>
          </p>
        </div>
        ```

<Aside type="tip" class="mt-4">
  你可以通过调整 `skeleton.fuzzy` 的值来控制骨架屏的粒度。较低的值会生成更多、更细粒度的骨架块，而较高的值则会生成更少、更大块的骨架。

  这也是 Gueleton 能够自动适应不同 UI 组件库的关键。
</Aside>

### `skeleton.type`

使用 `skeleton.type` 选项可以设置骨架的渲染方式。

- 可选值:
  - `overlay` (默认): 整个占位骨架会覆盖在实际内容上。
  - `inPlace`: `bone` 会覆盖在它的父元素上。

<LinkCard
  title="查看xx章节了解 Gueleton 如何处理两种渲染逻辑"
/>

### `skeleton.bone` 和 `skeleton.container`

使用 `skeleton.bone` 和 `skeleton.container` 选项分别可以自定义 `bone` 和 `container` 的样式。

它们接受一个 style 对象和 className 字符串。

#### bone

- 默认值:
  ```js
  {
    style: {
      backgroundColor: 'rgba(240, 240, 240, 1)',
    },
    className: '',
  }
  ```

#### container

- 默认值:
  ```js
  {
    style: {
      cursor: 'not-allowed',
      backgroundColor: 'rgba(255, 255, 255, 1)',
    },
    className: '',
  }
  ```